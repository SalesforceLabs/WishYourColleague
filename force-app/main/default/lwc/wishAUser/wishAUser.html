<template>
            <lightning-record-edit-form object-api-name="Message__c" record-id={selectedUser.wishId} density="auto" onsuccess={handleSuccess} onsubmit={handleSubmit}>


                <lightning-messages>
                </lightning-messages>
                
                <div class="demo-only demo-only--sizing slds-grid slds-wrap" style="background:white;">
                    <template if:false ={profile}>
                        <div class="slds-size_1-of-1 " style="padding:15px;">
                            <div class="slds-m-around_x-small slds-box slds-box_x-small">
                                <template if:true={selectedUser.name}>
                                    <div class="slds-align_absolute-center" style="height:5rem"> <p style="color:lightslategrey;font-size:25px;background:white">Wishing {selectedUser.name}</p></div>
                                </template>
                                <template if:false={selectedUser.name}>
                                    <div class="slds-align_absolute-center" style="height:5rem"> <p style="color:lightslategrey;font-size:25px;background:white">Wish your colleague</p></div>
                                </template>
                            </div>
                        </div>
                    </template>

                
                
                <div class="slds-size_1-of-2 " style="padding:15px;">
                    <div class="slds-m-around_x-small slds-box_x-small" style="height:402.5px;">
                        <template if:false={profile}>
                            <div class="slds-text-title"> <p style="color:lightslategrey;font-size:25px;"> Select the User </p></div>
                            <div class="demo-only demo-only--sizing slds-grid slds-wrap" style="padding-bottom:10px;">
                                <template for:each={users} for:item="user">
                                    <c-select-users  user={user} key={user.User__c}  data-targetid={user.User__c} profile={profile} selcted-user-id={selectedUser.id} onupdateselecteduser={updateSelectedUser} onclick={handleUserClick}></c-select-users>
                                </template>
                            </div>
                        </template>
                        <template if:true={selectedUser.id}>
                          <div class="slds-m-around_x-small slds-box slds-box_x-small">
                            <div class="slds-text-title"> <p style="color:lightslategrey;font-size:25px;"> Select the Ocassion </p></div>
                            <template if:true = {selectedUser.hasupcoming}>
                                <div class="slds-text-title"> <p style="color:lightslategrey;font-size:16px;padding-top:30px;"> Upcoming {selectedUser.name}'s Ocassion </p></div>
                                <div class="demo-only demo-only--sizing slds-grid slds-wrap">
                                    <template for:each={selectedUser.upcoming} for:item="upcoming">
                                        <c-select-ocassion key={upcoming.Id} occ={upcoming} data-targetid={upcoming.Id} onclick={handleOccClick} selcted-occ-id={selectedUser.selectedOcassion} data-selectedtype={upcoming.Occasion__r.Id} onupdateselectedocassion={handleUpdateOcc}></c-select-ocassion>
                                    </template>
                            </div>
                        </template>
                        <template if:true = {selectedUser.hasprev}>
                            <div class="slds-text-title"> <p style="color:lightslategrey;font-size:16px;padding-top:30px;"> Belated {selectedUser.name}'s Ocassion </p></div>
                            <div class="demo-only demo-only--sizing slds-grid slds-wrap">
                                <template for:each={selectedUser.prev} for:item="prev">
                                    <c-select-ocassion key={prev.Id} occ={prev}  data-targetid={prev.Id} onclick={handleOccClick} selcted-occ-id={selectedUser.selectedOcassion} data-selectedtype={prev.Occasion__r.Id} onupdateselectedocassion={handleUpdateOcc}></c-select-ocassion>
                                </template>
                            </div>
                            </template>
                        </div>
                    </template>
                    </div>
                </div>
            
                <div class="slds-size_1-of-2 " style="padding:15px;">
                    <div class="slds-m-around_x-small slds-box slds-box_x-small">
                             <c-show-preview image={selectedUser.image} wish={selectedUser.wish} set-position={position}></c-show-preview>
                    </div>
                </div>
               
                
                <div class="slds-size_1-of-1 " style="padding:15px;">
                    <div class="slds-m-around_x-small slds-box slds-box_x-small">
                        <div class="slds-text-title"> <p style="color:lightslategrey;font-size:25px;"> Send your warm wishes to your colleague</p></div>
                        <lightning-input-field field-name="Wish__c" data-targettype="RTA" value="" onchange={handleWishChange}></lightning-input-field>
                    </div>
                </div>
                
                <div class="slds-size_1-of-1 " style="padding:15px;">
                    <div class="slds-m-around_x-small slds-box slds-box_x-small">
                        <div class="slds-text-title"> <p style="color:lightslategrey;font-size:25px;padding-bottom:15px;"> Select a Card to wish your colleague </p></div>
                        <template if:true= {imagesURL}>
                            <template for:each={imagesURL} for:item="image" for:index="i">
                               <c-select-templates  key={image} image={image} selected-image={selectedUser.image}  data-image={image} onclick={handleTemplateChange} onupdatetemplate={handleUpdateTemplate}></c-select-templates>
                            </template>
                        </template>
                    </div>
                </div>

                <div class="slds-size_1-of-1 " style="padding:15px;">
                    <div class="slds-m-around_x-small slds-box slds-box_x-small">
                        <div class="slds-text-title"> <p style="color:lightslategrey;font-size:25px;padding-bottom:15px;">Make it special for your Buddy: </p></div>
                        <c-upload-your-own-template rec-id={selectedUser.selectedOcassionType} onupdatetemplates={addFileToTemplates}></c-upload-your-own-template>
                    </div>
                </div>
                
              <div class="slds-align_absolute-center" style="height:5rem">
                <lightning-button
                class="slds-m-top_small"
                variant="brand"
                type="submit"
                name="Submit"
                label="Submit">
            </lightning-button>
              </div>
        </div>      
       
          </lightning-record-edit-form>
</template>